<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galaxia de Justicia Algor√≠tmica</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #010409;
            color: #e0e0e0;
            overflow: hidden;
        }

        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #0a0a2e 0%, #16213e 50%, #0f3460 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 1s ease-in-out;
        }

        #loading-screen h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #00d4ff;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.7);
        }

        #loading-screen p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: #ccc;
        }

        .loader {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 5px solid rgba(0, 212, 255, 0.3);
            border-top-color: #00d4ff;
            animation: spin 1s infinite linear;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        #navigation {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 300px;
            max-height: 80vh;
            overflow-y: auto;
            transform: translateX(-320px);
            transition: transform 0.3s ease-in-out;
        }

        #navigation.visible {
            transform: translateX(0);
        }

        #nav-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #00d4ff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        #nav-toggle:hover {
            background: rgba(0, 212, 255, 0.2);
        }

        #navigation h2 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 18px;
            text-align: center;
        }

        .nav-category {
            margin-bottom: 15px;
        }

        .nav-category h3 {
            color: #ffd700;
            font-size: 14px;
            margin-bottom: 8px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            padding-bottom: 3px;
        }

        .nav-item {
            display: block;
            color: #ccc;
            text-decoration: none;
            padding: 8px 12px;
            margin: 3px 0;
            border-radius: 8px;
            font-size: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            transform: translateX(5px);
        }

        #info-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            max-height: 80vh;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            display: none;
            overflow-y: auto;
            transform: translateX(370px);
            transition: transform 0.3s ease-in-out;
        }

        #info-panel.visible {
            transform: translateX(0);
            display: block;
        }

        #info-panel h3 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 20px;
        }

        #info-panel .category {
            color: #ffd700;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        #info-panel .content {
            line-height: 1.6;
            color: #e0e0e0;
            font-size: 14px;
        }

        #info-panel .stats {
            background: rgba(0, 212, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 3px solid #00d4ff;
        }

        #info-panel .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        #info-panel .close-btn:hover {
            opacity: 1;
        }

        #controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
        }

        #controls button {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            border: none;
            color: white;
            padding: 10px 15px;
            margin: 0 5px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        #controls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            pointer-events: none;
            z-index: 2000;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            display: none;
        }

        .legend {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 12px;
            z-index: 1000;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .label {
            color: white;
            font-size: 12px;
            background: rgba(0, 0, 0, 0.7);
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            pointer-events: none;
        }

        @media (max-width: 768px) {
            #navigation, #info-panel {
                width: calc(100vw - 40px);
                max-width: none;
            }
            
            #controls, .legend {
                position: relative;
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <div id="loading-screen">
        <h1>Galaxia de Justicia Algor√≠tmica</h1>
        <p>Inicializando visualizaci√≥n del ecosistema digital judicial...</p>
        <div class="loader"></div>
    </div>
    
    <div id="container"></div>

    <div id="nav-toggle">‚ò∞</div>

    <nav id="navigation">
        <h2>üåå Navegador Gal√°ctico</h2>
        
        <div class="nav-category">
            <h3>‚≠ê Sol y Estrellas Centrales</h3>
            <a class="nav-item" data-target="sol-justicia">Sol de la Justicia Digital</a>
            <a class="nav-item" data-target="estrella-big-data">Estrella de Big Data</a>
            <a class="nav-item" data-target="estrella-ia">Estrella de IA</a>
        </div>

        <div class="nav-category">
            <h3>ü™ê Planetas (Capas del Modelo)</h3>
            <a class="nav-item" data-target="planeta-fundacional">Capa Fundacional</a>
            <a class="nav-item" data-target="planeta-procesal">Marco Procesal</a>
            <a class="nav-item" data-target="planeta-aplicacion">Capa de Aplicaci√≥n</a>
            <a class="nav-item" data-target="planeta-gobernanza">Capa de Gobernanza</a>
            <a class="nav-item" data-target="planeta-global">Perspectiva Global</a>
        </div>

        <div class="nav-category">
            <h3>üåô Lunas (Herramientas)</h3>
            <a class="nav-item" data-target="luna-pretoria">Pretoria</a>
            <a class="nav-item" data-target="luna-prisma">PRISMA</a>
            <a class="nav-item" data-target="luna-interoperabilidad">Interoperabilidad</a>
            <a class="nav-item" data-target="luna-prueba-novel">Prueba Novel</a>
        </div>

        <div class="nav-category">
            <h3>‚òÑÔ∏è Cometas y Asteroides</h3>
            <a class="nav-item" data-target="cometa-chatgpt">Cometa ChatGPT</a>
            <a class="nav-item" data-target="asteroide-sesgo">Asteroide del Sesgo</a>
            <a class="nav-item" data-target="asteroide-privacidad">Asteroide Privacidad</a>
        </div>

        <div class="nav-category">
            <h3>üåå Nebulosas (Principios)</h3>
            <a class="nav-item" data-target="nebulosa-debido-proceso">Debido Proceso</a>
            <a class="nav-item" data-target="nebulosa-explicabilidad">Explicabilidad</a>
            <a class="nav-item" data-target="nebulosa-etica">√âtica Algor√≠tmica</a>
        </div>

        <div class="nav-category">
            <h3>üìã Cuestionario</h3>
            <a class="nav-item" data-target="cuestionario-completo">Ver Cuestionario Completo</a>
            <a class="nav-item" data-target="pregunta-1">Pregunta 1: Recopilaci√≥n de Evidencia</a>
            <a class="nav-item" data-target="pregunta-2">Pregunta 2: Debido Proceso</a>
            <a class="nav-item" data-target="pregunta-3">Pregunta 3: Desaf√≠os Regulatorios</a>
            <a class="nav-item" data-target="pregunta-4">Pregunta 4: Control Normativo</a>
            <a class="nav-item" data-target="pregunta-5">Pregunta 5: Beneficios</a>
            <a class="nav-item" data-target="pregunta-6">Pregunta 6: Prueba Indiciaria</a>
            <a class="nav-item" data-target="pregunta-7">Pregunta 7: L√≠mites Jur√≠dicos</a>
            <a class="nav-item" data-target="pregunta-8">Pregunta 8: M√©todo Aut√≥nomo</a>
            <a class="nav-item" data-target="pregunta-9">Pregunta 9: Causalidad</a>
            <a class="nav-item" data-target="pregunta-10">Pregunta 10: Derecho a la Defensa</a>
            <a class="nav-item" data-target="pregunta-11">Pregunta 11: Funci√≥n Judicial</a>
            <a class="nav-item" data-target="pregunta-12">Pregunta 12: Herramientas</a>
            <a class="nav-item" data-target="pregunta-13">Pregunta 13: Elementos Probatorios</a>
        </div>
    </nav>

    <div id="info-panel">
        <button class="close-btn">&times;</button>
        <div class="category"></div>
        <h3></h3>
        <div class="content"></div>
    </div>

    <div id="controls">
        <button id="reset-view-btn">üè† Vista Inicial</button>
        <button id="toggle-animation-btn">‚èØÔ∏è Animaci√≥n</button>
        <button id="toggle-labels-btn">üè∑Ô∏è Etiquetas</button>
        <button id="overview-btn">üìä Resumen</button>
    </div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-color" style="background: #ffff00;"></div>
            <span>Sol y Estrellas (Conceptos Centrales)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #4169e1;"></div>
            <span>Planetas (Capas del Modelo)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #87ceeb;"></div>
            <span>Lunas (Herramientas)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #ff6347;"></div>
            <span>Cometas/Asteroides (Desaf√≠os)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #9370db;"></div>
            <span>Nebulosas (Principios)</span>
        </div>
    </div>

    <div class="tooltip"></div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>
    <script type="module">
        console.log("Script principal cargado.");
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { CSS2DObject, CSS2DRenderer } from 'three/addons/renderers/CSS2DRenderer.js';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';
        import { ShaderPass } from 'three/addons/postprocessing/ShaderPass.js';
        import { SSAOPass } from 'three/addons/postprocessing/SSAOPass.js';
        
        // Log para depuraci√≥n
        console.log("M√≥dulos importados correctamente");

        // Datos del modelo de la galaxia
        const galaxyData = {
            // Sol central - Justicia Digital
            'sol-justicia': {
                type: 'sol',
                title: 'Sol de la Justicia Digital Colombiana',
                category: 'N√∫cleo Central',
                position: [0, 0, 0],
                size: 8,
                color: '#ffff00',
                content: `
                    <p><strong>El centro de nuestro ecosistema judicial</strong> - La transformaci√≥n digital representa un redise√±o fundamental de los procesos y principios que sustentan la administraci√≥n de justicia en Colombia.</p>
                    
                    <div class="stats">
                        <strong>Impacto Transformacional:</strong><br>
                        ‚Ä¢ Transici√≥n acelerada por la crisis sanitaria<br>
                        ‚Ä¢ Redefinici√≥n de procesos tradicionales<br>
                        ‚Ä¢ Integraci√≥n de IA en decisiones judiciales<br>
                        ‚Ä¢ Nuevo paradigma tecnol√≥gico-jur√≠dico
                    </div>
                    
                    <p>Este sol irradia energ√≠a hacia todos los dem√°s elementos del sistema, representando c√≥mo la digitalizaci√≥n afecta cada aspecto de la justicia colombiana, desde la infraestructura de datos hasta el marco de gobernanza global.</p>
                `
            },
            
            // Estrellas - Conceptos centrales
            'estrella-big-data': {
                type: 'star',
                title: 'Estrella de Big Data',
                category: 'Concepto Central',
                position: [15, 5, -10],
                size: 6,
                color: '#ffd700',
                content: `
                    <p><strong>La fuente de energ√≠a informacional</strong> - Colombia genera un volumen masivo de datos digitales que alimenta todo el ecosistema de justicia digital.</p>
                    
                    <div class="stats">
                        <strong>Estad√≠sticas de Conectividad 2024:</strong><br>
                        ‚Ä¢ 9.09 millones de accesos fijos a internet<br>
                        ‚Ä¢ 49+ millones de accesos m√≥viles<br>
                        ‚Ä¢ 77.02 millones de conexiones m√≥viles activas<br>
                        ‚Ä¢ +24.7% aumento en velocidad de conexi√≥n
                    </div>
                    
                    <p>Esta estrella representa el CONPES 3920 - Pol√≠tica Nacional de Explotaci√≥n de Datos, que busca tratar los datos como un activo estrat√©gico para generar valor social y econ√≥mico.</p>
                `
            },
            'estrella-ia': {
                type: 'star',
                title: 'Estrella de Inteligencia Artificial',
                category: 'Concepto Central',
                position: [-15, 8, -12],
                size: 5.5,
                color: '#ffa500',
                content: `
                    <p><strong>El motor de transformaci√≥n</strong> - La IA representa el cambio cualitativo en la forma en que se procesa la informaci√≥n judicial, pasando del an√°lisis humano a la automatizaci√≥n inteligente.</p>
                    
                    <div class="stats">
                        <strong>Impacto en el Sistema Judicial:</strong><br>
                        ‚Ä¢ 30% de servidores judiciales ya utilizan IA<br>
                        ‚Ä¢ 91% considera necesarios lineamientos oficiales<br>
                        ‚Ä¢ Potencial de aumento de eficiencia del 900%<br>
                        ‚Ä¢ Nuevos desaf√≠os √©ticos y jur√≠dicos
                    </div>
                    
                    <p>La IA est√° transformando desde la gesti√≥n administrativa hasta el an√°lisis de riesgo criminal, generando tanto eficiencias notables como controversias √©ticas profundas.</p>
                `
            },
            
            // Planetas - Capas del modelo conceptual
            'planeta-fundacional': {
                type: 'planet',
                title: 'Capa Fundacional: Datos e Infraestructura',
                category: 'Primera Capa del Modelo',
                position: [20, 0, 15],
                size: 4.5,
                color: '#4169e1',
                content: `
                    <p><strong>La base s√≥lida del sistema</strong> - Toda iniciativa de justicia digital se sustenta sobre una infraestructura de datos robusta y interoperable.</p>
                    
                    <div class="stats">
                        <strong>Desaf√≠o Principal:</strong><br>
                        Fragmentaci√≥n de datos en "silos" institucionales
                    </div>
                    
                    <p><strong>Soluciones Implementadas:</strong></p>
                    <ul>
                        <li>Agencia Nacional Digital (AND) como articuladora</li>
                        <li>Marco de Interoperabilidad del MinTIC</li>
                        <li>Decreto 088 de 2022 - Digitalizaci√≥n obligatoria</li>
                        <li>Plataforma "Carpeta Ciudadana"</li>
                    </ul>
                    
                    <p>Sin una base de datos coherente y completa, las herramientas de IA m√°s avanzadas producir√°n resultados err√≥neos o sesgados.</p>
                `
            },
            'planeta-procesal': {
                type: 'planet',
                title: 'Capa Procesal: Adaptaci√≥n Jur√≠dica',
                category: 'Segunda Capa del Modelo',
                position: [-20, 5, 10],
                size: 4.8,
                color: '#228b22',
                content: `
                    <p><strong>Adaptando el derecho a la era digital</strong> - El sistema legal colombiano adapta ingeniosamente sus conceptos tradicionales para evaluar evidencia algor√≠tmica.</p>
                    
                    <div class="stats">
                        <strong>Transformaci√≥n de la Prueba Indiciaria:</strong><br>
                        ‚Ä¢ Hecho Indicador: De √∫nico a "constelaci√≥n de micro-datos"<br>
                        ‚Ä¢ Regla de Experiencia: Complementada por reglas algor√≠tmicas<br>
                        ‚Ä¢ Inferencia: De cualitativa a probabil√≠stica cuantificable
                    </div>
                    
                    <p><strong>Marco Regulatorio:</strong></p>
                    <ul>
                        <li>Art. 422 Ley 906/2004 - Prueba Novel (Daubert Test)</li>
                        <li>Art. 29 Constituci√≥n - Regla de Exclusi√≥n</li>
                        <li>Clasificaci√≥n como prueba pericial especializada</li>
                    </ul>
                `
            },
            'planeta-aplicacion': {
                type: 'planet',
                title: 'Capa de Aplicaci√≥n: IA en Acci√≥n',
                category: 'Tercera Capa del Modelo',
                position: [10, -10, -20],
                size: 5,
                color: '#ff4500',
                content: `
                    <p><strong>La IA como realidad operativa</strong> - Herramientas de inteligencia artificial ya transforman la gesti√≥n judicial y el an√°lisis de riesgo criminal.</p>
                    
                    <div class="stats">
                        <strong>Casos de √âxito:</strong><br>
                        ‚Ä¢ Pretoria (Corte Constitucional): +900% eficiencia<br>
                        ‚Ä¢ An√°lisis de 2,500+ sentencias diarias<br>
                        ‚Ä¢ Optimizaci√≥n en selecci√≥n de tutelas
                    </div>
                    
                    <p><strong>Aplicaciones Actuales:</strong></p>
                    <ul>
                        <li>Automatizaci√≥n administrativa</li>
                        <li>Clasificaci√≥n y an√°lisis de casos</li>
                        <li>Predicci√≥n de riesgo (PRISMA)</li>
                        <li>Asistencia en redacci√≥n (ChatGPT)</li>
                    </ul>
                    
                    <p><strong>Principio Fundamental:</strong> La IA es siempre una herramienta; la responsabilidad final recae indelegablemente en el juez humano.</p>
                `
            },
            'planeta-gobernanza': {
                type: 'planet',
                title: 'Capa de Gobernanza: √âtica y Regulaci√≥n',
                category: 'Cuarta Capa del Modelo',
                position: [-18, -8, -15],
                size: 4.2,
                color: '#800080',
                content: `
                    <p><strong>El marco √©tico y regulatorio</strong> - Normas, principios √©ticos y requisitos t√©cnicos que rigen el dise√±o e implementaci√≥n de herramientas digitales.</p>
                    
                    <div class="stats">
                        <strong>Acuerdo PCSJA24-12243 (2024):</strong><br>
                        ‚Ä¢ 30% de servidores ya usa IA<br>
                        ‚Ä¢ 91% considera necesarios lineamientos oficiales
                    </div>
                    
                    <p><strong>Principios Fundamentales:</strong></p>
                    <ul>
                        <li>Respeto a derechos fundamentales</li>
                        <li>No discriminaci√≥n</li>
                        <li>Calidad y seguridad de datos</li>
                        <li>Transparencia y explicabilidad</li>
                        <li>Control del usuario (supremac√≠a humana)</li>
                    </ul>
                    
                    <p>Incluye deberes espec√≠ficos para servidores judiciales y requisitos t√©cnicos para herramientas de IA.</p>
                `
            },
            'planeta-global': {
                type: 'planet',
                title: 'Capa Global: Perspectiva Internacional',
                category: 'Quinta Capa del Modelo',
                position: [0, 15, 20],
                size: 4,
                color: '#00bfff',
                content: `
                    <p><strong>Colombia en la arena internacional</strong> - Las iniciativas de Colombia se alinean con est√°ndares √©ticos internacionales, pero su enfoque regulatorio de "soft law" difiere de modelos m√°s estrictos.</p>
                    
                    <div class="stats">
                        <strong>Comparaci√≥n Regulatoria:</strong><br>
                        ‚Ä¢ UE: "Hard Law" (Ley de IA, alto riesgo)<br>
                        ‚Ä¢ Brasil: Mixto (Proyecto de Ley, regulaci√≥n CNJ)<br>
                        ‚Ä¢ Colombia: "Soft Law" (Acuerdo PCSJA24-12243)
                    </div>
                    
                    <p>La trayectoria de Colombia se sit√∫a actualmente en el campo del "soft law", planteando un debate estrat√©gico sobre la necesidad de evolucionar hacia un marco legalmente vinculante.</p>
                `
            },
            
            // Lunas - Herramientas y conceptos espec√≠ficos
            'luna-pretoria': {
                type: 'moon',
                title: 'Luna Pretoria',
                category: 'Herramienta de Eficiencia',
                position: [12, -12, -18],
                size: 1.5,
                color: '#87ceeb',
                content: `
                    <p><strong>El motor de eficiencia judicial</strong> - Sistema de IA de la Corte Constitucional basado en el modelo argentino Prometea.</p>
                    
                    <div class="stats">
                        <strong>Capacidades:</strong><br>
                        ‚Ä¢ Analiza 2,500+ sentencias diarias<br>
                        ‚Ä¢ Agrupa y clasifica autom√°ticamente<br>
                        ‚Ä¢ Identifica patrones y temas recurrentes<br>
                        ‚Ä¢ +900% aumento en eficiencia de gesti√≥n
                    </div>
                    
                    <p><strong>Beneficios:</strong></p>
                    <ul>
                        <li>Fortalece coherencia del precedente judicial</li>
                        <li>Optimiza proceso de selecci√≥n de tutelas</li>
                        <li>Libera tiempo para an√°lisis jur√≠dico de fondo</li>
                        <li>Reduce tareas de clasificaci√≥n masiva</li>
                    </ul>
                    
                    <p>Representa la visi√≥n de la IA como asistente administrativo que apoya pero no reemplaza la labor judicial.</p>
                `
            },
            'luna-prisma': {
                type: 'moon',
                title: 'Luna PRISMA',
                category: 'Justicia Predictiva',
                position: [8, -14, -12],
                size: 1.8,
                color: '#ff6347',
                content: `
                    <p><strong>El dilema de la justicia predictiva</strong> - Herramienta de la Fiscal√≠a para predecir probabilidad de reincidencia criminal.</p>
                    
                    <div class="stats">
                        <strong>Objetivos Declarados:</strong><br>
                        ‚Ä¢ Uso eficiente de cupos carcelarios<br>
                        ‚Ä¢ Reducci√≥n de congesti√≥n carcelaria<br>
                        ‚Ä¢ Detenci√≥n preventiva para alto riesgo
                    </div>
                    
                    <p><strong>Controversias √âticas:</strong></p>
                    <ul>
                        <li>Riesgo de sesgo algor√≠tmico (caso COMPAS)</li>
                        <li>Discriminaci√≥n por proxy</li>
                        <li>Perpetuaci√≥n de sesgos sist√©micos</li>
                        <li>Falta de auditor√≠a transparente</li>
                    </ul>
                    
                    <p>Aunque excluye variables sociodemogr√°ficas expl√≠citas, puede amplificar discriminaci√≥n hist√≥rica a trav√©s de datos "objetivos" correlacionados.</p>
                `
            },
            'luna-interoperabilidad': {
                type: 'moon',
                title: 'Luna Interoperabilidad',
                category: 'Integraci√≥n T√©cnica',
                position: [22, 2, 12],
                size: 1.3,
                color: '#00ced1',
                content: `
                    <p><strong>Conectando los silos de datos</strong> - Iniciativas para integrar sistemas fragmentados del Estado colombiano.</p>
                    
                    <div class="stats">
                        <strong>Problema:</strong><br>
                        Entidades operan en "silos" con sistemas heredados incapaces de comunicarse
                    </div>
                    
                    <p><strong>Soluciones T√©cnicas:</strong></p>
                    <ul>
                        <li>Marco de Interoperabilidad MinTIC</li>
                        <li>Est√°ndares abiertos obligatorios</li>
                        <li>Plataforma de intercambio de informaci√≥n</li>
                        <li>APIs estandarizadas</li>
                    </ul>
                    
                    <p><strong>Impacto:</strong> La calidad de an√°lisis de IA depende directamente de la completitud y calidad de datos interoperables.</p>
                `
            },
            'luna-prueba-novel': {
                type: 'moon',
                title: 'Luna Prueba Novel',
                category: 'Marco Legal',
                position: [-22, 7, 8],
                size: 1.4,
                color: '#dda0dd',
                content: `
                    <p><strong>El filtro de admisibilidad cient√≠fica</strong> - Art. 422 Ley 906/2004 regula evidencia basada en t√©cnicas cient√≠ficas novedosas.</p>
                    
                    <div class="stats">
                        <strong>Criterios Daubert Test:</strong><br>
                        ‚Ä¢ Verificaci√≥n emp√≠rica de la teor√≠a<br>
                        ‚Ä¢ Publicaci√≥n y revisi√≥n por pares<br>
                        ‚Ä¢ Conocimiento de tasa de error<br>
                        ‚Ä¢ Aceptaci√≥n en comunidad experta
                    </div>
                    
                    <p><strong>Proceso de Incorporaci√≥n:</strong></p>
                    <ol>
                        <li>Audiencia preparatoria robusta</li>
                        <li>Pr√°ctica a trav√©s de perito humano</li>
                        <li>Valoraci√≥n bajo sana cr√≠tica</li>
                    </ol>
                    
                    <p>Evita que procesos se inunden de "cajas negras" algor√≠tmicas de fiabilidad desconocida.</p>
                `
            },
            
            // Cometas - Tecnolog√≠as emergentes
            'cometa-chatgpt': {
                type: 'comet',
                title: 'Cometa ChatGPT',
                category: 'IA Generativa',
                position: [25, 10, -5],
                size: 1.2,
                color: '#ff69b4',
                content: `
                    <p><strong>La nueva frontera de IA generativa</strong> - Uso emergente de modelos de lenguaje en redacci√≥n de sentencias judiciales.</p>
                    
                    <div class="stats">
                        <strong>Casos Documentados:</strong><br>
                        Jueces colombianos usando ChatGPT para apoyo en redacci√≥n y estructuraci√≥n de argumentos
                    </div>
                    
                    <p><strong>Cambio Cualitativo:</strong></p>
                    <ul>
                        <li>De IA que analiza datos a IA que genera contenido</li>
                        <li>Apariencia de razonamiento jur√≠dico</li>
                        <li>Riesgo de dependencia cognitiva</li>
                    </ul>
                    
                    <p><strong>Imperativo del Control Humano:</strong> El resultado algor√≠tmico es solo un insumo que el juez debe analizar, verificar y validar con su criterio.</p>
                `
            },
            
            // Asteroides - Desaf√≠os y riesgos
            'asteroide-sesgo': {
                type: 'asteroid',
                title: 'Asteroide del Sesgo',
                category: 'Riesgo √âtico',
                position: [-25, -10, 8],
                size: 1,
                color: '#dc143c',
                content: `
                    <p><strong>La amenaza invisible del sesgo algor√≠tmico</strong> - Riesgo de perpetuar y amplificar discriminaciones sist√©micas bajo apariencia de objetividad.</p>
                    
                    <div class="stats">
                        <strong>Caso COMPAS (EE.UU.):</strong><br>
                        ‚Ä¢ Sesgo racial en predicciones<br>
                        ‚Ä¢ Doble tasa de error para poblaci√≥n negra<br>
                        ‚Ä¢ Falsos positivos sistem√°ticos
                    </div>
                    
                    <p><strong>Tipos de Sesgo:</strong></p>
                    <ul>
                        <li>Sesgo en datos de entrenamiento</li>
                        <li>Discriminaci√≥n por proxy</li>
                        <li>Sesgo de confirmaci√≥n</li>
                        <li>Sesgo de automatizaci√≥n</li>
                    </ul>
                    
                    <p>Los algoritmos aprenden, codifican y amplifican la discriminaci√≥n hist√≥rica presente en los datos.</p>
                `
            },
            'asteroide-privacidad': {
                type: 'asteroid',
                title: 'Asteroide Privacidad',
                category: 'Derechos Fundamentales',
                position: [22, -15, 18],
                size: 1.1,
                color: '#b22222',
                content: `
                    <p><strong>La tensi√≥n entre eficiencia e intimidad</strong> - Conflicto entre capacidad investigativa del Estado y protecci√≥n de derechos fundamentales.</p>
                    
                    <div class="stats">
                        <strong>Marco Legal:</strong><br>
                        ‚Ä¢ Ley 1581/2012 - Protecci√≥n de Datos<br>
                        ‚Ä¢ Art. 29 Constituci√≥n - Regla de Exclusi√≥n<br>
                        ‚Ä¢ Habeas Data como derecho fundamental
                    </div>
                    
                    <p><strong>Riesgos:</strong></p>
                    <ul>
                        <li>Vigilancia masiva encubierta</li>
                        <li>Perfilado sin consentimiento</li>
                        <li>Violaci√≥n de secreto de comunicaciones</li>
                        <li>Uso indebido de datos personales</li>
                    </ul>
                    
                    <p>Cualquier evidencia obtenida violando el debido proceso es nula de pleno derecho.</p>
                `
            },
            
            // Nebulosas - Principios √©ticos y jur√≠dicos
            'nebulosa-debido-proceso': {
                type: 'nebula',
                title: 'Nebulosa del Debido Proceso',
                category: 'Principio Fundamental',
                position: [-30, 12, -25],
                size: 6,
                color: '#9370db',
                content: `
                    <p><strong>La garant√≠a constitucional envolvente</strong> - Principios fundamentales que deben protegerse en la era del Big Data judicial.</p>
                    
                    <div class="stats">
                        <strong>Garant√≠as Amenazadas:</strong><br>
                        ‚Ä¢ Derecho a la defensa y contradicci√≥n<br>
                        ‚Ä¢ Presunci√≥n de inocencia<br>
                        ‚Ä¢ Imparcialidad judicial<br>
                        ‚Ä¢ Decisi√≥n motivada
                    </div>
                    
                    <p><strong>Desaf√≠os Espec√≠ficos:</strong></p>
                    <ul>
                        <li>Algoritmos de "caja negra" no interrogables</li>
                        <li>Sesgo de "culpabilidad futura"</li>
                        <li>Sesgos algor√≠tmicos inconscientes</li>
                        <li>Fallos basados en resultados inexplicables</li>
                    </ul>
                    
                    <p>Ninguna eficiencia tecnol√≥gica puede justificar la vulneraci√≥n de estas garant√≠as fundamentales.</p>
                `
            },
            'nebulosa-explicabilidad': {
                type: 'nebula',
                title: 'Nebulosa de Explicabilidad',
                category: 'Transparencia Algor√≠tmica',
                position: [30, -18, 15],
                size: 5,
                color: '#4b0082',
                content: `
                    <p><strong>La exigencia de transparencia algor√≠tmica</strong> - Principio emergente que exige que las decisiones algor√≠tmicas puedan ser explicadas y contradichas.</p>
                    
                    <div class="stats">
                        <strong>T√©cnicas XAI:</strong><br>
                        ‚Ä¢ LIME (Local Interpretable Model-agnostic Explanations)<br>
                        ‚Ä¢ SHAP (SHapley Additive exPlanations)<br>
                        ‚Ä¢ √Årboles de decisi√≥n interpretables
                    </div>
                    
                    <p><strong>Requisitos Legales:</strong></p>
                    <ul>
                        <li>Motivaci√≥n de decisiones judiciales</li>
                        <li>Derecho a la contradicci√≥n efectiva</li>
                        <li>Transparencia en procesos p√∫blicos</li>
                        <li>Auditor√≠a de algoritmos</li>
                    </ul>
                    
                    <p>Una conclusi√≥n basada en algoritmo inexplicable ser√≠a inconstitucional por falta de motivaci√≥n.</p>
                `
            },
            'nebulosa-etica': {
                type: 'nebula',
                title: 'Nebulosa de √âtica Algor√≠tmica',
                category: 'Principios Rectores',
                position: [0, 25, -20],
                size: 5.5,
                color: '#8a2be2',
                content: `
                    <p><strong>El marco valorativo de la IA judicial</strong> - Conjunto de principios √©ticos que deben guiar el dise√±o, implementaci√≥n y uso de la IA en la justicia.</p>
                    
                    <div class="stats">
                        <strong>Principios Fundamentales:</strong><br>
                        ‚Ä¢ Respeto a la dignidad humana<br>
                        ‚Ä¢ No discriminaci√≥n<br>
                        ‚Ä¢ Transparencia y explicabilidad<br>
                        ‚Ä¢ Responsabilidad y rendici√≥n de cuentas
                    </div>
                    
                    <p><strong>Est√°ndares Internacionales:</strong></p>
                    <ul>
                        <li>Carta √âtica del Consejo de Europa</li>
                        <li>Principios de IA de la OCDE</li>
                        <li>Recomendaciones de UNESCO</li>
                        <li>Ley de IA de la Uni√≥n Europea</li>
                    </ul>
                    
                    <p>La √©tica no es un complemento opcional, sino un requisito estructural para la legitimidad de la IA en la justicia.</p>
                `
            }
        };

        // A√±adir datos del cuestionario - Preguntas 1-5
        galaxyData['pregunta-1'] = {
            type: 'question',
            title: 'Pregunta 1: Recopilaci√≥n de Evidencia',
            category: 'Cuestionario - Pregunta',
            position: [40, 15, -30],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 45,
                semiMinorAxis: 35,
                eccentricity: 0.3,
                inclination: 0.2,
                speed: 0.0003,
                phase: 0
            },
            content: `
                <p><strong>¬øCree usted que ha cambiado la forma en que se recopila y analiza la evidencia en los procesos judiciales con el uso de nuevas tecnolog√≠as?</strong></p>
                <p>Absolutamente. El cambio es radical y va m√°s all√° de una simple modernizaci√≥n. Hemos pasado de un mundo de escasez de pruebas f√≠sicas a uno de sobreabundancia de datos digitales. La "escena del crimen" ahora es tambi√©n el dominio digital: la nube, los registros de un GPS, las transacciones o la actividad en redes sociales. El an√°lisis ya no es solo una revisi√≥n humana y lineal; ahora es algor√≠tmico, capaz de procesar vol√∫menes masivos de informaci√≥n para encontrar patrones y correlaciones que ser√≠an invisibles para nosotros. Esto no es hacer lo de siempre m√°s r√°pido, es hacer algo completamente nuevo: extraer conocimiento de datos dispersos para reconstruir hechos.</p>
            `
        };

        galaxyData['pregunta-2'] = {
            type: 'question',
            title: 'Pregunta 2: Debido Proceso',
            category: 'Cuestionario - Pregunta',
            position: [38, 12, -28],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 42,
                semiMinorAxis: 34,
                eccentricity: 0.25,
                inclination: 0.15,
                speed: 0.00035,
                phase: 0.5
            },
            content: `
                <p><strong>¬øQu√© principios del debido proceso pueden verse impactados por el uso de tecnolog√≠as de an√°lisis masivo de datos como lo es la Big Data?</strong></p>
                <p>El impacto es directo y profundo sobre las garant√≠as m√°s sagradas del debido proceso. El derecho a la defensa y a la contradicci√≥n se ve amenazado cuando nos enfrentamos a algoritmos de "caja negra" que no podemos interrogar. La presunci√≥n de inocencia se pone en riesgo con sistemas predictivos que pueden generar un sesgo de "culpabilidad futura" en el juzgador. La imparcialidad judicial puede ser socavada por sesgos algor√≠tmicos que perpet√∫an discriminaciones sist√©micas sin que el juez sea consciente de ello. Finalmente, el derecho a una decisi√≥n motivada se vulnera si un fallo se basa en un resultado computacional que no puede ser explicado l√≥gicamente en t√©rminos jur√≠dicos.</p>
            `
        };

        galaxyData['pregunta-3'] = {
            type: 'question',
            title: 'Pregunta 3: Desaf√≠os Regulatorios',
            category: 'Cuestionario - Pregunta',
            position: [36, 9, -26],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 39,
                semiMinorAxis: 33,
                eccentricity: 0.2,
                inclination: 0.1,
                speed: 0.0004,
                phase: 1.0
            },
            content: `
                <p><strong>¬øCu√°les cree usted que pueden ser los desaf√≠os para la implementaci√≥n de Big Data en la administraci√≥n de justicia colombiana desde el punto de vista regulatorio?</strong></p>
                <p>Desde el punto de vista regulatorio, los desaf√≠os son enormes. Primero, necesitamos adaptar nuestras normas probatorias, dise√±adas para pruebas tangibles, a una evidencia que es por naturaleza probabil√≠stica y algor√≠tmica. Segundo, es urgente crear una gobernanza de datos clara que equilibre la necesidad investigativa del Estado con el derecho a la privacidad y al habeas data. Tercero, debemos establecer est√°ndares t√©cnicos m√≠nimos de transparencia y explicabilidad para los algoritmos. Y, por √∫ltimo, un desaf√≠o crucial es la capacitaci√≥n y acreditaci√≥n de jueces, fiscales y abogados para que puedan interactuar con estas tecnolog√≠as de forma cr√≠tica y competente.</p>
            `
        };

        galaxyData['pregunta-4'] = {
            type: 'question',
            title: 'Pregunta 4: Control Normativo',
            category: 'Cuestionario - Pregunta',
            position: [34, 6, -24],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 36,
                semiMinorAxis: 32,
                eccentricity: 0.15,
                inclination: 0.05,
                speed: 0.00045,
                phase: 1.5
            },
            content: `
                <p><strong>¬øExiste un control normativo que garantice la legalidad y validez del uso de tecnolog√≠a de an√°lisis masivo de datos como lo es Big Data en la administraci√≥n de justicia?</strong></p>
                <p>Actualmente, no tenemos una ley espec√≠fica e integral. El control normativo es un mosaico de normas preexistentes que aplicamos de forma indirecta. La principal v√≠a de control es a trav√©s de las reglas de la prueba pericial y la prueba novel del C√≥digo de Procedimiento Penal (Art. 422), que exige demostrar la fiabilidad cient√≠fica de una t√©cnica. Tambi√©n aplicamos la Ley 1581 de 2012 sobre protecci√≥n de datos como un l√≠mite fundamental. Y aunque el Consejo Superior de la Judicatura ha emitido lineamientos √©ticos muy importantes (Acuerdo PCSJA24-12243), estos son "soft law", es decir, directrices sin fuerza de ley vinculante. En resumen, la regulaci√≥n es fragmentaria y deja vac√≠os que generan incertidumbre.</p>
            `
        };

        galaxyData['pregunta-5'] = {
            type: 'question',
            title: 'Pregunta 5: Beneficios',
            category: 'Cuestionario - Pregunta',
            position: [32, 3, -22],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 33,
                semiMinorAxis: 31,
                eccentricity: 0.1,
                inclination: 0.25,
                speed: 0.0005,
                phase: 2.0
            },
            content: `
                <p><strong>¬øEn qu√© aspectos cree usted que el an√°lisis masivo de datos puede beneficiar la investigaci√≥n judicial y ayudar a mejorar la valoraci√≥n de las pruebas en los casos legales?</strong></p>
                <p>Los beneficios son significativos, siempre que se usen con cautela. El an√°lisis masivo de datos nos permite identificar patrones delictivos y modus operandi al conectar informaci√≥n que antes estaba aislada en diferentes bases de datos. Facilita el an√°lisis de v√≠nculos entre personas, lugares y eventos que a simple vista no parecen relacionados, haciendo las investigaciones m√°s eficientes. Adem√°s, es una herramienta poderosa para enriquecer y verificar otras pruebas; por ejemplo, una coartada puede ser corroborada o desmentida al contrastarla con registros de geolocalizaci√≥n o transacciones financieras. La polic√≠a predictiva es otra √°rea de beneficio potencial, pero debe manejarse con extrema precauci√≥n por el alto riesgo de amplificar sesgos hist√≥ricos y discriminaci√≥n.</p>
            `
        };

        // A√±adir datos del cuestionario - Preguntas 6-10
        galaxyData['pregunta-6'] = {
            type: 'question',
            title: 'Pregunta 6: Prueba Indiciaria',
            category: 'Cuestionario - Pregunta',
            position: [30, 0, -20],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 30,
                semiMinorAxis: 29,
                eccentricity: 0.05,
                inclination: 0.3,
                speed: 0.00055,
                phase: 2.5
            },
            content: `
                <p><strong>¬øC√≥mo puede el an√°lisis masivo de datos como lo es la Big Data contribuir a la construcci√≥n de la prueba indiciaria en los procesos judiciales?</strong></p>
                <p>El Big Data no solo potencia la prueba indiciaria, sino que la reconfigura estructuralmente. Primero, transforma el "hecho indicador": ya no es un hecho √∫nico y probado (como "el acusado huy√≥"), sino una "constelaci√≥n de miles de micro-indicadores digitales" cuyo patr√≥n colectivo es estad√≠sticamente significativo. Segundo, revoluciona el proceso de inferencia: la "regla de la experiencia" del juez, basada en el sentido com√∫n, es complementada o reemplazada por una "regla algor√≠tmica" derivada del an√°lisis estad√≠stico. Esto nos permite pasar de una inferencia cualitativa a una conclusi√≥n con un grado de probabilidad cuantificable, fortaleciendo enormemente la robustez del indicio.</p>
            `
        };

        galaxyData['pregunta-7'] = {
            type: 'question',
            title: 'Pregunta 7: L√≠mites Jur√≠dicos',
            category: 'Cuestionario - Pregunta',
            position: [28, -3, -18],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 28,
                semiMinorAxis: 26,
                eccentricity: 0.12,
                inclination: 0.35,
                speed: 0.0006,
                phase: 3.0
            },
            content: `
                <p><strong>¬øCu√°les son los l√≠mites jur√≠dicos para la utilizaci√≥n de datos procesados mediante inteligencia artificial en la construcci√≥n de indicios?</strong></p>
                <p>Los l√≠mites son claros e infranqueables: los derechos fundamentales. Ninguna eficiencia tecnol√≥gica puede justificar la vulneraci√≥n del debido proceso, la presunci√≥n de inocencia, la intimidad o la igualdad. Otro l√≠mite es el principio de legalidad probatoria: los datos base deben ser obtenidos l√≠citamente, de lo contrario, la prueba es nula. Adem√°s, su uso debe regirse por los principios de necesidad y proporcionalidad. Y, finalmente, un l√≠mite emergente y crucial es el principio de explicabilidad: una conclusi√≥n basada en un algoritmo de "caja negra" que no puede ser explicado y, por tanto, contradicho, ser√≠a inconstitucional por falta de motivaci√≥n.</p>
            `
        };

        galaxyData['pregunta-8'] = {
            type: 'question',
            title: 'Pregunta 8: M√©todo Aut√≥nomo',
            category: 'Cuestionario - Pregunta',
            position: [26, -6, -16],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 26,
                semiMinorAxis: 23,
                eccentricity: 0.18,
                inclination: 0.4,
                speed: 0.00065,
                phase: 3.5
            },
            content: `
                <p><strong>¬øPuede las tecnolog√≠as de an√°lisis masivo de datos como la Big Data ser considerado un m√©todo de prueba aut√≥nomo, o debe ser complementado con otros medios probatorios para garantizar su legalidad?</strong></p>
                <p>En el estado actual de la tecnolog√≠a y el derecho, debe ser considerado un m√©todo de prueba complementario, no aut√≥nomo. Un resultado algor√≠tmico por s√≠ solo no es una prueba plena; es un elemento material probatorio que debe ser introducido al proceso a trav√©s de una prueba pericial que valide su metodolog√≠a y fiabilidad. Su valoraci√≥n debe hacerse siempre en conjunto con las dem√°s pruebas del expediente, bajo las reglas de la sana cr√≠tica. Una condena no podr√≠a sustentarse exclusivamente en un hallazgo algor√≠tmico. A futuro, con la estandarizaci√≥n y certificaci√≥n, podr√≠a ganar autonom√≠a, como ocurri√≥ con la prueba de ADN, pero hoy no estamos en ese punto.</p>
            `
        };

        galaxyData['pregunta-9'] = {
            type: 'question',
            title: 'Pregunta 9: Causalidad',
            category: 'Cuestionario - Pregunta',
            position: [24, -9, -14],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 24,
                semiMinorAxis: 20,
                eccentricity: 0.22,
                inclination: 0.45,
                speed: 0.0007,
                phase: 4.0
            },
            content: `
                <p><strong>Desde el punto de vista probatorio, ¬øc√≥mo se establecer√≠a la relaci√≥n de causalidad entre los indicios obtenidos mediante tecnolog√≠as de an√°lisis masivo de datos como Big Data y su correspondencia con los hechos jur√≠dicos en un proceso judicial?</strong></p>
                <p>Este es el "tal√≥n de Aquiles" del Big Data. Los algoritmos son excelentes para encontrar correlaciones, pero son incapaces de establecer causalidad por s√≠ mismos. Un algoritmo puede decirnos que dos eventos ocurren juntos, pero no por qu√©. Por lo tanto, establecer esa relaci√≥n de causalidad es una tarea intelectual que recae exclusivamente en el juez, en un proceso de dos pasos: primero, una validaci√≥n t√©cnica a trav√©s de un perito que explique la fiabilidad de la correlaci√≥n encontrada. Y segundo, una validaci√≥n jur√≠dico-l√≥gica, donde el juez integra esa correlaci√≥n en una narrativa coherente con el resto de las pruebas, aplicando las reglas de la experiencia y la sana cr√≠tica para construir el nexo causal. El algoritmo da el "qu√©", el juez debe construir el "porqu√©".</p>
            `
        };

        galaxyData['pregunta-10'] = {
            type: 'question',
            title: 'Pregunta 10: Derecho a la Defensa',
            category: 'Cuestionario - Pregunta',
            position: [22, -12, -12],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 22,
                semiMinorAxis: 17,
                eccentricity: 0.26,
                inclination: 0.5,
                speed: 0.00075,
                phase: 4.5
            },
            content: `
                <p><strong>¬øEn qu√© medida considera usted que el uso de Big Data puede afectar el derecho a la defensa y el principio de contradicci√≥n en los procesos penales?</strong></p>
                <p>La afectaci√≥n es grav√≠sima. Genera una profunda asimetr√≠a de armas, donde el Estado cuenta con herramientas de an√°lisis que la defensa, especialmente la p√∫blica, no puede igualar. M√°s importante a√∫n, anula casi por completo la contradicci√≥n efectiva. ¬øC√≥mo se contrainterroga a un algoritmo? Para hacerlo, la defensa necesitar√≠a acceso al c√≥digo fuente, a los datos de entrenamiento y a la metodolog√≠a, informaci√≥n que suele estar protegida por secretos comerciales. Sin poder auditar y cuestionar el proceso que gener√≥ el resultado, el derecho a la contradicci√≥n se convierte en una formalidad vac√≠a, una ilusi√≥n.</p>
            `
        };

        // A√±adir datos del cuestionario - Preguntas 11-13
        galaxyData['pregunta-11'] = {
            type: 'question',
            title: 'Pregunta 11: Funci√≥n Judicial',
            category: 'Cuestionario - Pregunta',
            position: [20, -15, -10],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 20,
                semiMinorAxis: 14,
                eccentricity: 0.3,
                inclination: 0.55,
                speed: 0.0008,
                phase: 5.0
            },
            content: `
                <p><strong>¬øConsidera usted que el uso del Big Data podr√≠a transformar la funci√≥n judicial, acelerando la toma de decisiones sin comprometer la independencia de los jueces?</strong></p>
                <p>S√≠, sin duda puede acelerar la toma de decisiones, como ya lo demuestran herramientas como Pretoria en la Corte Constitucional, que automatizan tareas de clasificaci√≥n y gesti√≥n. Sin embargo, la independencia judicial enfrenta un riesgo sutil: la dependencia cognitiva. El peligro no es que un robot reemplace al juez, sino que el juez, abrumado por la carga laboral, comience a aceptar acr√≠ticamente las recomendaciones del algoritmo, un fen√≥meno conocido como "sesgo de automatizaci√≥n". Esto erosionar√≠a el juicio independiente. Por ello, el principio rector es que la IA debe ser siempre una herramienta de apoyo, pero la responsabilidad y la decisi√≥n final deben permanecer, indelegablemente, en el ser humano.</p>
            `
        };

        galaxyData['pregunta-12'] = {
            type: 'question',
            title: 'Pregunta 12: Herramientas',
            category: 'Cuestionario - Pregunta',
            position: [18, -18, -8],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 18,
                semiMinorAxis: 11,
                eccentricity: 0.34,
                inclination: 0.6,
                speed: 0.00085,
                phase: 5.5
            },
            content: `
                <p><strong>¬øQu√© herramientas y tecnolog√≠as considera usted puedan fortalecer la recolecci√≥n y an√°lisis de indicios en los procesos judiciales, asegurando la legalidad y la imparcialidad?</strong></p>
                <p>Debemos priorizar tecnolog√≠as que incorporen garant√≠as "por dise√±o". Por ejemplo, herramientas de Inteligencia Artificial Explicable (XAI), que no sean "cajas negras" y puedan justificar sus resultados, como ya lo sugieren las directrices del Consejo Superior. Tambi√©n es clave el software de cadena de custodia digital, que crea un registro inalterable de cada interacci√≥n con la evidencia digital para garantizar su integridad. Asimismo, las plataformas de Inteligencia de Fuentes Abiertas (OSINT) son muy √∫tiles, pero deben tener salvaguardas √©ticas para no convertirse en herramientas de vigilancia masiva. Finalmente, las plataformas de an√°lisis federado permiten analizar datos sin centralizarlos, protegiendo mejor la privacidad.</p>
            `
        };

        galaxyData['pregunta-13'] = {
            type: 'question',
            title: 'Pregunta 13: Elementos Probatorios',
            category: 'Cuestionario - Pregunta',
            position: [16, -21, -6],
            size: 2.2,
            color: '#3498db',
            orbitParams: {
                semiMajorAxis: 16,
                semiMinorAxis: 8,
                eccentricity: 0.38,
                inclination: 0.65,
                speed: 0.0009,
                phase: 6.0
            },
            content: `
                <p><strong>¬øQu√© elementos probatorios y tecnol√≥gicos utilizar√≠a usted para fortalecer la construcci√≥n de indicios dentro del debido proceso, garantizando la legalidad y la imparcialidad en el sistema judicial colombiano?</strong></p>
                <p>Para garantizar un debido proceso robusto, combinar√≠a elementos probatorios y tecnol√≥gicos. El elemento probatorio central ser√≠a un Informe Pericial de Validaci√≥n Algor√≠tmica obligatorio, que detalle el modelo, los datos, las tasas de error y una auditor√≠a de sesgos. Tecnol√≥gicamente, implementar√≠a entornos de prueba seguros (sandboxing) para que la defensa pueda auditar los algoritmos de la acusaci√≥n. Tambi√©n usar√≠a tecnolog√≠a de registros inmutables (como blockchain) para crear una traza auditable de todo el proceso anal√≠tico. Pero el elemento m√°s crucial no es tecnol√≥gico, sino humano: una inversi√≥n seria y continua en la capacitaci√≥n de jueces, fiscales y defensores para que sean consumidores cr√≠ticos, y no pasivos, de estas tecnolog√≠as.</p>
            `
        };

        // A√±adir respuestas como astros m√°s peque√±os que orbitan alrededor de las preguntas
        galaxyData['respuesta-1'] = {
            type: 'answer',
            title: 'Respuesta 1: Cambio Radical',
            category: 'Cuestionario - Respuesta',
            position: [41, 16, -31],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-1',
            orbitParams: {
                radius: 3,
                speed: 0.002,
                phase: 0
            },
            content: `
                <p><strong>Respuesta a la Pregunta 1:</strong></p>
                <p>El cambio es radical: de escasez de pruebas f√≠sicas a sobreabundancia de datos digitales. La "escena del crimen" ahora incluye la nube, GPS, transacciones y redes sociales. El an√°lisis algor√≠tmico encuentra patrones invisibles para humanos.</p>
            `
        };

        galaxyData['respuesta-2'] = {
            type: 'answer',
            title: 'Respuesta 2: Impacto en Garant√≠as',
            category: 'Cuestionario - Respuesta',
            position: [39, 13, -29],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-2',
            orbitParams: {
                radius: 3,
                speed: 0.0022,
                phase: 0.5
            },
            content: `
                <p><strong>Respuesta a la Pregunta 2:</strong></p>
                <p>El impacto afecta garant√≠as fundamentales: derecho a la defensa frente a algoritmos de "caja negra", presunci√≥n de inocencia amenazada por predicciones, imparcialidad judicial comprometida por sesgos algor√≠tmicos, y decisiones motivadas en riesgo por resultados inexplicables.</p>
            `
        };

        galaxyData['respuesta-3'] = {
            type: 'answer',
            title: 'Respuesta 3: Desaf√≠os Regulatorios',
            category: 'Cuestionario - Respuesta',
            position: [37, 10, -27],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-3',
            orbitParams: {
                radius: 3,
                speed: 0.0024,
                phase: 1.0
            },
            content: `
                <p><strong>Respuesta a la Pregunta 3:</strong></p>
                <p>Los desaf√≠os incluyen: adaptar normas probatorias a evidencia algor√≠tmica, crear gobernanza de datos que equilibre investigaci√≥n y privacidad, establecer est√°ndares de transparencia, y capacitar a operadores judiciales para interactuar cr√≠ticamente con estas tecnolog√≠as.</p>
            `
        };

        galaxyData['respuesta-4'] = {
            type: 'answer',
            title: 'Respuesta 4: Control Fragmentario',
            category: 'Cuestionario - Respuesta',
            position: [35, 7, -25],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-4',
            orbitParams: {
                radius: 3,
                speed: 0.0026,
                phase: 1.5
            },
            content: `
                <p><strong>Respuesta a la Pregunta 4:</strong></p>
                <p>No existe ley espec√≠fica integral. El control es un mosaico: prueba pericial y novel (Art. 422 CPP), protecci√≥n de datos (Ley 1581/2012), y lineamientos √©ticos del Consejo Superior ("soft law"). La regulaci√≥n es fragmentaria y deja vac√≠os significativos.</p>
            `
        };

        galaxyData['respuesta-5'] = {
            type: 'answer',
            title: 'Respuesta 5: Beneficios Potenciales',
            category: 'Cuestionario - Respuesta',
            position: [33, 4, -23],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-5',
            orbitParams: {
                radius: 3,
                speed: 0.0028,
                phase: 2.0
            },
            content: `
                <p><strong>Respuesta a la Pregunta 5:</strong></p>
                <p>Los beneficios incluyen: identificaci√≥n de patrones delictivos, an√°lisis de v√≠nculos entre personas y eventos aparentemente no relacionados, verificaci√≥n de otras pruebas (como coartadas), y potencial para polic√≠a predictiva (con cautela por riesgo de sesgos).</p>
            `
        };

        galaxyData['respuesta-6'] = {
            type: 'answer',
            title: 'Respuesta 6: Reconfiguraci√≥n del Indicio',
            category: 'Cuestionario - Respuesta',
            position: [31, 1, -21],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-6',
            orbitParams: {
                radius: 3,
                speed: 0.003,
                phase: 2.5
            },
            content: `
                <p><strong>Respuesta a la Pregunta 6:</strong></p>
                <p>Big Data reconfigura la prueba indiciaria: transforma el "hecho indicador" en una constelaci√≥n de micro-indicadores digitales y revoluciona la inferencia al complementar la experiencia del juez con reglas algor√≠tmicas, permitiendo conclusiones con probabilidad cuantificable.</p>
            `
        };

        galaxyData['respuesta-7'] = {
            type: 'answer',
            title: 'Respuesta 7: L√≠mites Infranqueables',
            category: 'Cuestionario - Respuesta',
            position: [29, -2, -19],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-7',
            orbitParams: {
                radius: 3,
                speed: 0.0032,
                phase: 3.0
            },
            content: `
                <p><strong>Respuesta a la Pregunta 7:</strong></p>
                <p>Los l√≠mites son los derechos fundamentales, el principio de legalidad probatoria (datos obtenidos l√≠citamente), necesidad y proporcionalidad, y el principio emergente de explicabilidad: algoritmos de "caja negra" inexplicables ser√≠an inconstitucionales por falta de motivaci√≥n.</p>
            `
        };

        galaxyData['respuesta-8'] = {
            type: 'answer',
            title: 'Respuesta 8: M√©todo Complementario',
            category: 'Cuestionario - Respuesta',
            position: [27, -5, -17],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-8',
            orbitParams: {
                radius: 3,
                speed: 0.0034,
                phase: 3.5
            },
            content: `
                <p><strong>Respuesta a la Pregunta 8:</strong></p>
                <p>Actualmente debe ser complementario, no aut√≥nomo. Requiere validaci√≥n pericial de metodolog√≠a y fiabilidad, y valoraci√≥n conjunta con otras pruebas. Una condena no puede basarse exclusivamente en hallazgos algor√≠tmicos. Con estandarizaci√≥n futura, podr√≠a ganar autonom√≠a.</p>
            `
        };

        galaxyData['respuesta-9'] = {
            type: 'answer',
            title: 'Respuesta 9: Tal√≥n de Aquiles',
            category: 'Cuestionario - Respuesta',
            position: [25, -8, -15],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-9',
            orbitParams: {
                radius: 3,
                speed: 0.0036,
                phase: 4.0
            },
            content: `
                <p><strong>Respuesta a la Pregunta 9:</strong></p>
                <p>El "tal√≥n de Aquiles": los algoritmos encuentran correlaciones pero no establecen causalidad. La relaci√≥n causal requiere: 1) validaci√≥n t√©cnica por perito sobre fiabilidad de correlaciones, y 2) validaci√≥n jur√≠dico-l√≥gica donde el juez integra esa correlaci√≥n en narrativa coherente con otras pruebas.</p>
            `
        };

        galaxyData['respuesta-10'] = {
            type: 'answer',
            title: 'Respuesta 10: Asimetr√≠a de Armas',
            category: 'Cuestionario - Respuesta',
            position: [23, -11, -13],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-10',
            orbitParams: {
                radius: 3,
                speed: 0.0038,
                phase: 4.5
            },
            content: `
                <p><strong>Respuesta a la Pregunta 10:</strong></p>
                <p>La afectaci√≥n es grav√≠sima: genera asimetr√≠a de armas entre Estado y defensa, y anula la contradicci√≥n efectiva. ¬øC√≥mo contrainterrogar un algoritmo sin acceso a c√≥digo fuente, datos de entrenamiento y metodolog√≠a? El derecho a contradicci√≥n se vuelve una formalidad vac√≠a.</p>
            `
        };

        galaxyData['respuesta-11'] = {
            type: 'answer',
            title: 'Respuesta 11: Dependencia Cognitiva',
            category: 'Cuestionario - Respuesta',
            position: [21, -14, -11],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-11',
            orbitParams: {
                radius: 3,
                speed: 0.004,
                phase: 5.0
            },
            content: `
                <p><strong>Respuesta a la Pregunta 11:</strong></p>
                <p>Puede acelerar decisiones, pero la independencia judicial enfrenta el riesgo de "dependencia cognitiva": jueces aceptando acr√≠ticamente recomendaciones algor√≠tmicas por sobrecarga laboral. El principio rector debe ser que la IA es herramienta de apoyo, pero la decisi√≥n final es indelegablemente humana.</p>
            `
        };

        galaxyData['respuesta-12'] = {
            type: 'answer',
            title: 'Respuesta 12: Garant√≠as por Dise√±o',
            category: 'Cuestionario - Respuesta',
            position: [19, -17, -9],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-12',
            orbitParams: {
                radius: 3,
                speed: 0.0042,
                phase: 5.5
            },
            content: `
                <p><strong>Respuesta a la Pregunta 12:</strong></p>
                <p>Priorizar tecnolog√≠as con garant√≠as "por dise√±o": IA Explicable (XAI) que justifique resultados, cadena de custodia digital con registro inalterable, plataformas OSINT con salvaguardas √©ticas, y an√°lisis federado que proteja privacidad al procesar datos sin centralizarlos.</p>
            `
        };

        galaxyData['respuesta-13'] = {
            type: 'answer',
            title: 'Respuesta 13: Validaci√≥n Algor√≠tmica',
            category: 'Cuestionario - Respuesta',
            position: [17, -20, -7],
            size: 1.2,
            color: '#e74c3c',
            parentQuestion: 'pregunta-13',
            orbitParams: {
                radius: 3,
                speed: 0.0044,
                phase: 6.0
            },
            content: `
                <p><strong>Respuesta a la Pregunta 13:</strong></p>
                <p>Combinar√≠a: Informe Pericial de Validaci√≥n Algor√≠tmica obligatorio (detallando modelo, datos, tasas de error), entornos de prueba seguros para auditor√≠a por la defensa, registros inmutables (blockchain) para trazabilidad, y capacitaci√≥n continua de operadores judiciales para uso cr√≠tico de estas tecnolog√≠as.</p>
            `
        };

        // Variables globales
        let scene, camera, renderer, labelRenderer, controls, composer;
        let celestialBodies = {};
        let animationEnabled = true;
        let labelsVisible = false;
        let tooltip;
        let loadingManager;
        let bloomLayer, bloomComposer;

        // Inicializaci√≥n
        function init() {
            console.log("Iniciando funci√≥n init()");
            
            // Configurar gestor de carga
            loadingManager = new THREE.LoadingManager();
            
            // A√±adir eventos de depuraci√≥n al LoadingManager
            loadingManager.onStart = function(url, itemsLoaded, itemsTotal) {
                console.log('Comenzando a cargar: ' + url + '.\nCargados ' + itemsLoaded + ' de ' + itemsTotal + ' archivos.');
            };
            
            loadingManager.onLoad = function() {
                console.log('LoadingManager: Todos los recursos cargados');
                document.getElementById('loading-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loading-screen').style.display = 'none';
                }, 1000);
            };
            
            loadingManager.onProgress = function(url, itemsLoaded, itemsTotal) {
                console.log('Cargando: ' + url + '.\nCargados ' + itemsLoaded + ' de ' + itemsTotal + ' archivos.');
            };
            
            loadingManager.onError = function(url) {
                console.error('Error al cargar: ' + url);
            };
            
            // Forzar el evento onLoad del LoadingManager
            console.log("Forzando manualmente el evento onLoad del LoadingManager");
            setTimeout(() => {
                loadingManager.onLoad();
            }, 2000);
            
            // Crear escena
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x000a0f, 0.0015);
            
            // Crear capa para efectos de bloom
            bloomLayer = new THREE.Layers();
            bloomLayer.set(1);
            
            console.log("Escena creada");
            
            // Configurar c√°mara
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(50, 30, 50);
            console.log("C√°mara configurada");
            
            // Configurar renderer con WebGL2 si est√° disponible
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('webgl2', { antialias: true });
            const useWebGL2 = !!context;
            
            if (useWebGL2) {
                console.log("Usando WebGL2 (Context7)");
                renderer = new THREE.WebGLRenderer({
                    antialias: true,
                    alpha: true,
                    canvas: canvas,
                    context: context,
                    powerPreference: "high-performance"
                });
            } else {
                console.log("Usando WebGL1 (fallback)");
                renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            }
            
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setClearColor(0x000000, 0);
            
            // Habilitar caracter√≠sticas modernas de renderizado
            renderer.physicallyCorrectLights = true;
            renderer.outputEncoding = THREE.sRGBEncoding;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.0;
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            
            document.getElementById('container').appendChild(renderer.domElement);
            
            // Configurar label renderer
            labelRenderer = new CSS2DRenderer();
            labelRenderer.setSize(window.innerWidth, window.innerHeight);
            labelRenderer.domElement.style.position = 'absolute';
            labelRenderer.domElement.style.top = '0px';
            labelRenderer.domElement.style.pointerEvents = 'none';
            document.getElementById('container').appendChild(labelRenderer.domElement);
            
            // Configurar controles
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.maxDistance = 200;
            controls.minDistance = 10;
            
            // Crear estrellas de fondo
            createStarField();
            console.log("Campo de estrellas creado");
            
            // Crear cuerpos celestiales
            createCelestialBodies();
            console.log("Cuerpos celestiales creados");
            
            // Configurar iluminaci√≥n
            setupLighting();
            console.log("Iluminaci√≥n configurada");
            
            // Configurar eventos
            setupEvents();
            console.log("Eventos configurados");
            
            // Configurar post-procesamiento
            setupPostProcessing();
            console.log("Post-procesamiento configurado");
            
            // Crear tooltip
            createTooltip();
            console.log("Tooltip creado");
            
            // Iniciar animaci√≥n
            console.log("Iniciando animaci√≥n");
            animate();
        }

        function createStarField() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.5,
                transparent: true,
                opacity: 0.8,
                sizeAttenuation: true
            });
            
            const starsVertices = [];
            for (let i = 0; i < 15000; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                starsVertices.push(x, y, z);
            }
            
            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            const starField = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(starField);
        }

        function createCelestialBodies() {
            console.log("Creando cuerpos celestiales. Total: " + Object.keys(galaxyData).length);
            Object.keys(galaxyData).forEach(key => {
                try {
                    console.log("Creando cuerpo celestial: " + key);
                    const data = galaxyData[key];
                    const body = createCelestialBody(data);
                    body.userData = { key, data };
                    celestialBodies[key] = body;
                    scene.add(body);
                    
                    // Crear etiqueta
                    if (labelsVisible) {
                        createLabel(body, data.title);
                    }
                    console.log("Cuerpo celestial creado: " + key);
                } catch (error) {
                    console.error("Error al crear cuerpo celestial " + key + ": ", error);
                }
            });
            console.log("Todos los cuerpos celestiales creados");
        }

        function createCelestialBody(data) {
            const group = new THREE.Group();
            
            let geometry, material;
            
            // Cargar texturas para mejorar el realismo
            const textureLoader = new THREE.TextureLoader(loadingManager);
            
            // Texturas predeterminadas para PBR
            const defaultNormalMap = textureLoader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/earth_normal_2048.jpg');
            const defaultRoughnessMap = textureLoader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/earth_specular_2048.jpg');
            const defaultMetalnessMap = textureLoader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/earth_specular_2048.jpg');
            
            switch (data.type) {
                case 'question':
                    geometry = new THREE.SphereGeometry(data.size, 64, 64);
                    material = new THREE.MeshPhysicalMaterial({
                        color: data.color,
                        emissive: data.color,
                        emissiveIntensity: 0.2,
                        roughness: 0.7,
                        metalness: 0.3,
                        normalMap: defaultNormalMap,
                        roughnessMap: defaultRoughnessMap,
                        metalnessMap: defaultMetalnessMap,
                        clearcoat: 0.5,
                        clearcoatRoughness: 0.3,
                        envMapIntensity: 1.0
                    });
                    break;
                    
                case 'answer':
                    geometry = new THREE.SphereGeometry(data.size, 32, 32);
                    material = new THREE.MeshPhysicalMaterial({
                        color: data.color,
                        emissive: data.color,
                        emissiveIntensity: 0.1,
                        roughness: 0.6,
                        metalness: 0.4,
                        normalMap: defaultNormalMap,
                        roughnessMap: defaultRoughnessMap,
                        metalnessMap: defaultMetalnessMap,
                        clearcoat: 0.3,
                        clearcoatRoughness: 0.2
                    });
                    break;
                    
                case 'sol':
                    geometry = new THREE.SphereGeometry(data.size, 64, 64);
                    material = new THREE.MeshBasicMaterial({
                        color: data.color
                    });
                    // A√±adir efecto de brillo m√°s localizado
                    const glowSize = data.size * 1.2; // Reducir el tama√±o del resplandor
                    const glowGeometry = new THREE.SphereGeometry(glowSize, 32, 32);
                    const glowMaterial = new THREE.ShaderMaterial({
                        uniforms: {
                            c: { type: "f", value: 0.5 }, // Aumentar para concentrar el brillo
                            p: { type: "f", value: 2.5 }, // Aumentar para hacer el brillo m√°s pronunciado cerca del sol
                            glowColor: { type: "c", value: new THREE.Color(data.color) },
                            viewVector: { type: "v3", value: camera.position }
                        },
                        vertexShader: `
                            uniform vec3 viewVector;
                            uniform float c;
                            uniform float p;
                            varying float intensity;
                            void main() {
                                vec3 vNormal = normalize(normal);
                                vec3 vNormel = normalize(viewVector);
                                // F√≥rmula mejorada para concentrar el brillo cerca del sol
                                intensity = pow(c - dot(vNormal, vNormel), p) * 0.8;
                                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                            }
                        `,
                        fragmentShader: `
                            uniform vec3 glowColor;
                            varying float intensity;
                            void main() {
                                // Atenuaci√≥n m√°s r√°pida para limitar el alcance del resplandor
                                vec3 glow = glowColor * intensity * intensity;
                                gl_FragColor = vec4(glow, intensity * 0.9); // Transparencia basada en intensidad
                            }
                        `,
                        side: THREE.BackSide,
                        blending: THREE.AdditiveBlending,
                        transparent: true
                    });
                    const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                    group.add(glow);
                    break;
                    
                case 'star':
                    geometry = new THREE.SphereGeometry(data.size, 32, 32);
                    material = new THREE.MeshBasicMaterial({
                        color: data.color
                    });
                    break;
                    
                case 'planet':
                    geometry = new THREE.SphereGeometry(data.size, 64, 64);
                    material = new THREE.MeshPhysicalMaterial({
                        color: data.color,
                        roughness: 0.8,
                        metalness: 0.2,
                        normalMap: defaultNormalMap,
                        roughnessMap: defaultRoughnessMap,
                        normalScale: new THREE.Vector2(1, 1),
                        envMapIntensity: 0.8
                    });
                    break;
                    
                case 'moon':
                    geometry = new THREE.SphereGeometry(data.size, 32, 32);
                    material = new THREE.MeshPhysicalMaterial({
                        color: data.color,
                        roughness: 0.9,
                        metalness: 0.1,
                        normalMap: defaultNormalMap,
                        normalScale: new THREE.Vector2(0.8, 0.8)
                    });
                    break;
                    
                case 'comet':
                    // Crear n√∫cleo del cometa
                    geometry = new THREE.SphereGeometry(data.size, 16, 16);
                    material = new THREE.MeshPhongMaterial({
                        color: data.color
                    });
                    
                    // Crear cola del cometa
                    const tailGeometry = new THREE.ConeGeometry(data.size * 0.8, data.size * 8, 16);
                    const tailMaterial = new THREE.MeshBasicMaterial({
                        color: data.color,
                        transparent: true,
                        opacity: 0.6,
                        side: THREE.DoubleSide
                    });
                    const tail = new THREE.Mesh(tailGeometry, tailMaterial);
                    tail.position.set(-data.size * 4, 0, 0);
                    tail.rotation.z = Math.PI / 2;
                    group.add(tail);
                    break;
                    
                case 'asteroid':
                    geometry = new THREE.DodecahedronGeometry(data.size, 1);
                    material = new THREE.MeshStandardMaterial({
                        color: data.color,
                        roughness: 0.8,
                        metalness: 0.2
                    });
                    // Deformar geometr√≠a para hacerla m√°s irregular
                    const positionAttribute = geometry.getAttribute('position');
                    const vertex = new THREE.Vector3();
                    for (let i = 0; i < positionAttribute.count; i++) {
                        vertex.fromBufferAttribute(positionAttribute, i);
                        vertex.x += (Math.random() - 0.5) * 0.2 * data.size;
                        vertex.y += (Math.random() - 0.5) * 0.2 * data.size;
                        vertex.z += (Math.random() - 0.5) * 0.2 * data.size;
                        positionAttribute.setXYZ(i, vertex.x, vertex.y, vertex.z);
                    }
                    geometry.computeVertexNormals();
                    break;
                    
                case 'nebula':
                    geometry = new THREE.SphereGeometry(data.size, 32, 32);
                    material = new THREE.MeshBasicMaterial({
                        color: data.color,
                        transparent: true,
                        opacity: 0.3,
                        wireframe: true
                    });
                    
                    // A√±adir part√≠culas para efecto nebuloso
                    const particlesGeometry = new THREE.BufferGeometry();
                    const particlesMaterial = new THREE.PointsMaterial({
                        color: data.color,
                        size: 0.2,
                        transparent: true,
                        opacity: 0.5,
                        sizeAttenuation: true
                    });
                    
                    const particlesPositions = [];
                    for (let i = 0; i < 1000; i++) {
                        const theta = Math.random() * Math.PI * 2;
                        const phi = Math.acos(2 * Math.random() - 1);
                        const radius = data.size * (0.8 + Math.random() * 0.4);
                        
                        const x = radius * Math.sin(phi) * Math.cos(theta);
                        const y = radius * Math.sin(phi) * Math.sin(theta);
                        const z = radius * Math.cos(phi);
                        
                        particlesPositions.push(x, y, z);
                    }
                    
                    particlesGeometry.setAttribute('position', new THREE.Float32BufferAttribute(particlesPositions, 3));
                    const particles = new THREE.Points(particlesGeometry, particlesMaterial);
                    group.add(particles);
                    break;
                    
                case 'special': // Para el cuestionario completo
                    geometry = new THREE.OctahedronGeometry(data.size);
                    material = new THREE.MeshPhongMaterial({
                        color: data.color,
                        emissive: data.color,
                        emissiveIntensity: 0.2
                    });
                    break;
            }
            
            const mesh = new THREE.Mesh(geometry, material);
            mesh.position.set(...data.position);
            group.add(mesh);
            
            return group;
        }

        function createLabel(object, text) {
            const labelDiv = document.createElement('div');
            labelDiv.className = 'label';
            labelDiv.textContent = text;
            
            const label = new CSS2DObject(labelDiv);
            
            // Obtener el tama√±o de la geometr√≠a de manera segura
            let offsetY = 2;
            if (object.children[0] && object.children[0].geometry) {
                if (object.children[0].geometry.parameters && object.children[0].geometry.parameters.radius) {
                    offsetY += object.children[0].geometry.parameters.radius;
                } else if (object.children[0].geometry.boundingSphere) {
                    offsetY += object.children[0].geometry.boundingSphere.radius;
                } else {
                    // Usar un valor predeterminado basado en el tipo de objeto
                    const data = object.userData.data;
                    if (data) {
                        offsetY += data.size || 2;
                    }
                }
            }
            
            label.position.set(0, offsetY, 0);
            object.add(label);
        }

        function setupLighting() {
            // Luz ambiental mejorada
            const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
            scene.add(ambientLight);
            
            // Luz direccional principal con sombras
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1.2);
            directionalLight.position.set(50, 50, 50);
            directionalLight.castShadow = true;
            directionalLight.shadow.mapSize.width = 2048;
            directionalLight.shadow.mapSize.height = 2048;
            directionalLight.shadow.camera.near = 0.5;
            directionalLight.shadow.camera.far = 500;
            directionalLight.shadow.bias = -0.0001;
            scene.add(directionalLight);
            
            // Luz de relleno suave
            const fillLight = new THREE.DirectionalLight(0x8888ff, 0.3);
            fillLight.position.set(-50, -10, -50);
            scene.add(fillLight);
            
            // Luces puntuales para estrellas con atenuaci√≥n f√≠sica
            Object.keys(galaxyData).forEach(key => {
                const data = galaxyData[key];
                if (data.type === 'sol' || data.type === 'star') {
                    const pointLight = new THREE.PointLight(data.color, 1.5, 100, 2); // Atenuaci√≥n f√≠sica cuadr√°tica
                    pointLight.position.set(...data.position);
                    scene.add(pointLight);
                }
            });
            
            // A√±adir luz ambiental de hemisferio para simular rebote de luz
            const hemiLight = new THREE.HemisphereLight(0xffffbb, 0x080820, 0.3);
            scene.add(hemiLight);
        }

        function setupEvents() {
            // Eventos de navegaci√≥n
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    const target = e.target.getAttribute('data-target');
                    if (target && celestialBodies[target]) {
                        focusOnObject(target);
                        showInfo(target);
                    }
                });
            });
            
            // Eventos de mouse
            renderer.domElement.addEventListener('mousemove', onMouseMove);
            renderer.domElement.addEventListener('click', onClick);
            
            // Redimensionamiento
            window.addEventListener('resize', onWindowResize);
            
            // Botones de control
            document.getElementById('reset-view-btn').addEventListener('click', resetView);
            document.getElementById('toggle-animation-btn').addEventListener('click', toggleAnimation);
            document.getElementById('toggle-labels-btn').addEventListener('click', toggleLabels);
            document.getElementById('overview-btn').addEventListener('click', showOverview);
            
            // Bot√≥n de navegaci√≥n
            document.getElementById('nav-toggle').addEventListener('click', toggleNavigation);
            
            // Bot√≥n de cierre del panel de informaci√≥n
            document.querySelector('#info-panel .close-btn').addEventListener('click', closeInfoPanel);
        }

        function createTooltip() {
            tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            document.body.appendChild(tooltip);
        }

        function onMouseMove(event) {
            const mouse = new THREE.Vector2();
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);
            
            const intersects = raycaster.intersectObjects(scene.children, true);
            
            if (intersects.length > 0) {
                const object = intersects[0].object;
                let parent = object.parent;
                
                while (parent && !parent.userData.key) {
                    parent = parent.parent;
                }
                
                if (parent && parent.userData.key) {
                    const data = parent.userData.data;
                    tooltip.innerHTML = `<strong>${data.title}</strong><br>${data.category}`;
                    tooltip.style.left = event.clientX + 10 + 'px';
                    tooltip.style.top = event.clientY - 10 + 'px';
                    tooltip.style.display = 'block';
                    renderer.domElement.style.cursor = 'pointer';
                } else {
                    tooltip.style.display = 'none';
                    renderer.domElement.style.cursor = 'default';
                }
            } else {
                tooltip.style.display = 'none';
                renderer.domElement.style.cursor = 'default';
            }
        }

        function onClick(event) {
            const mouse = new THREE.Vector2();
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);
            
            const intersects = raycaster.intersectObjects(scene.children, true);
            
            if (intersects.length > 0) {
                const object = intersects[0].object;
                let parent = object.parent;
                
                while (parent && !parent.userData.key) {
                    parent = parent.parent;
                }
                
                if (parent && parent.userData.key) {
                    focusOnObject(parent.userData.key);
                    showInfo(parent.userData.key);
                }
            }
        }

        function focusOnObject(key) {
            const object = celestialBodies[key];
            console.log(`focusOnObject: Enfocando en objeto ${key}`);
            if (object) {
                const position = object.children[0].position.clone();
                
                // Calcular distancia de forma segura, verificando que existan todas las propiedades
                let distance = 15; // Valor predeterminado
                if (object.children[0] && object.children[0].geometry) {
                    if (object.children[0].geometry.parameters && object.children[0].geometry.parameters.radius) {
                        distance = object.children[0].geometry.parameters.radius * 5 + 10;
                        console.log(`focusOnObject: Usando radius de parameters: ${object.children[0].geometry.parameters.radius}`);
                    } else if (object.children[0].geometry.boundingSphere && object.children[0].geometry.boundingSphere.radius) {
                        distance = object.children[0].geometry.boundingSphere.radius * 5 + 10;
                        console.log(`focusOnObject: Usando radius de boundingSphere: ${object.children[0].geometry.boundingSphere.radius}`);
                    } else {
                        console.log(`focusOnObject: No se encontr√≥ radius, usando valor predeterminado: ${distance}`);
                    }
                } else {
                    console.log(`focusOnObject: Objeto o geometr√≠a no disponible, usando valor predeterminado: ${distance}`);
                }
                
                // Calcular nueva posici√≥n de c√°mara
                const targetPosition = new THREE.Vector3();
                targetPosition.copy(position);
                
                // Animar transici√≥n
                const startPosition = camera.position.clone();
                const startTarget = controls.target.clone();
                const duration = 1000; // milisegundos
                const startTime = Date.now();
                
                function animateCamera() {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const easeProgress = 1 - Math.pow(1 - progress, 3); // Ease out cubic
                    
                    // Calcular posici√≥n intermedia
                    const newCameraPosition = new THREE.Vector3().copy(startPosition);
                    const direction = new THREE.Vector3().subVectors(position, startPosition).normalize();
                    const offset = direction.multiplyScalar(distance);
                    const finalCameraPosition = new THREE.Vector3().copy(position).add(offset);
                    
                    newCameraPosition.lerp(finalCameraPosition, easeProgress);
                    camera.position.copy(newCameraPosition);
                    
                    // Actualizar target
                    const newTarget = new THREE.Vector3().copy(startTarget).lerp(position, easeProgress);
                    controls.target.copy(newTarget);
                    controls.update();
                    
                    if (progress < 1) {
                        requestAnimationFrame(animateCamera);
                    }
                }
                
                animateCamera();
            }
        }

        function showInfo(key) {
            const data = galaxyData[key];
            if (data) {
                const panel = document.getElementById('info-panel');
                panel.querySelector('.category').textContent = data.category;
                panel.querySelector('h3').textContent = data.title;
                panel.querySelector('.content').innerHTML = data.content;
                panel.classList.add('visible');
            }
        }

        function closeInfoPanel() {
            document.getElementById('info-panel').classList.remove('visible');
        }

        function toggleNavigation() {
            const nav = document.getElementById('navigation');
            nav.classList.toggle('visible');
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            labelRenderer.setSize(window.innerWidth, window.innerHeight);
            
            // Actualizar tambi√©n los compositores de efectos
            if (composer) {
                composer.setSize(window.innerWidth, window.innerHeight);
            }
            if (bloomComposer) {
                bloomComposer.setSize(window.innerWidth, window.innerHeight);
            }
        }

        // Sistema de detecci√≥n de colisiones
        function checkCollisions() {
            const bodies = Object.values(celestialBodies);
            const collisionThreshold = 0.5; // Umbral de distancia para considerar colisi√≥n
            
            // Crear esferas de colisi√≥n para cada cuerpo
            for (let i = 0; i < bodies.length; i++) {
                const bodyA = bodies[i];
                if (!bodyA.userData || !bodyA.userData.data) continue;
                
                const dataA = bodyA.userData.data;
                const radiusA = dataA.size || 1;
                const posA = bodyA.position.clone();
                
                // Verificar colisiones con otros cuerpos
                for (let j = i + 1; j < bodies.length; j++) {
                    const bodyB = bodies[j];
                    if (!bodyB.userData || !bodyB.userData.data) continue;
                    
                    const dataB = bodyB.userData.data;
                    const radiusB = dataB.size || 1;
                    const posB = bodyB.position.clone();
                    
                    // Calcular distancia entre cuerpos
                    const distance = posA.distanceTo(posB);
                    const minDistance = (radiusA + radiusB) * collisionThreshold;
                    
                    // Si hay colisi√≥n, ajustar posiciones
                    if (distance < minDistance) {
                        // Calcular vector de direcci√≥n de la colisi√≥n
                        const direction = new THREE.Vector3().subVectors(posA, posB).normalize();
                        
                        // Calcular cu√°nto deben moverse los cuerpos para evitar la colisi√≥n
                        const overlap = minDistance - distance;
                        const moveA = overlap * 0.5;
                        const moveB = overlap * 0.5;
                        
                        // Mover cuerpos en direcciones opuestas para evitar la colisi√≥n
                        bodyA.position.add(direction.clone().multiplyScalar(moveA));
                        bodyB.position.add(direction.clone().multiplyScalar(-moveB));
                    }
                }
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            
            if (animationEnabled) {
                // Calcular centro de masa para efectos gravitacionales
                const centerOfMass = new THREE.Vector3(0, 0, 0);
                let totalMass = 0;
                
                // Primer paso: calcular centro de masa
                Object.keys(celestialBodies).forEach(key => {
                    const body = celestialBodies[key];
                    const data = galaxyData[key];
                    const mass = data.size * data.size * data.size; // Aproximaci√≥n de masa basada en tama√±o
                    
                    if (body.children[0]) {
                        const position = body.children[0].getWorldPosition(new THREE.Vector3());
                        centerOfMass.add(position.multiplyScalar(mass));
                        totalMass += mass;
                    }
                });
                
                // Normalizar centro de masa
                if (totalMass > 0) {
                    centerOfMass.divideScalar(totalMass);
                }
                
                // Aplicar detecci√≥n de colisiones
                checkCollisions();
                
                // Rotaci√≥n y movimiento de cuerpos celestiales
                Object.keys(celestialBodies).forEach(key => {
                    const body = celestialBodies[key];
                    const data = galaxyData[key];
                    
                    // Rotaci√≥n realista basada en el tipo de cuerpo celeste
                    if (data.type === 'planet' || data.type === 'moon') {
                        // Rotaci√≥n m√°s realista con velocidad variable seg√∫n tama√±o
                        const rotationSpeed = 0.005 / (data.size * 0.5);
                        body.children[0].rotation.y += rotationSpeed;
                        // A√±adir ligera inclinaci√≥n en el eje
                        body.children[0].rotation.x += rotationSpeed * 0.1;
                    } else if (data.type === 'star') {
                        // Las estrellas rotan m√°s lentamente
                        body.children[0].rotation.y += 0.003;
                        // Efecto de pulsaci√≥n para estrellas
                        const pulseFactor = Math.sin(Date.now() * 0.001) * 0.05 + 1;
                        body.children[0].scale.set(pulseFactor, pulseFactor, pulseFactor);
                    } else if (data.type === 'sol') {
                        body.children[0].rotation.y += 0.001;
                        if (body.children[1] && body.children[1].material.uniforms && body.children[1].material.uniforms.viewVector) {
                            body.children[1].rotation.y -= 0.001;
                            body.children[1].material.uniforms.viewVector.value.copy(camera.position);
                        }
                    } else if (data.type === 'comet') {
                        // Mover cometa en una trayectoria el√≠ptica
                        const time = Date.now() * 0.0001;
                        const semiMajorAxis = 40;
                        const semiMinorAxis = 20;
                        const eccentricity = 0.5;
                        const x = semiMajorAxis * Math.cos(time);
                        const z = semiMinorAxis * Math.sin(time);
                        body.position.set(x, body.position.y, z);
                        
                        // Orientar cometa hacia el centro
                        body.lookAt(0, 0, 0);
                    } else if (data.type === 'asteroid') {
                        // Rotaci√≥n irregular
                        body.children[0].rotation.x += 0.01;
                        body.children[0].rotation.y += 0.008;
                        body.children[0].rotation.z += 0.005;
                    } else if (data.type === 'nebula') {
                        // Rotaci√≥n lenta
                        body.rotation.y += 0.0005;
                        if (body.children.length > 1) {
                            body.children[1].rotation.y -= 0.0003;
                        }
                    } else if (data.type === 'question') {
                        // √ìrbitas el√≠pticas para preguntas
                        if (data.orbitParams) {
                            // Reducir a√∫n m√°s la velocidad de movimiento (a un 20% de la original)
                            const time = Date.now() * (data.orbitParams.speed * 0.2);
                            const phase = data.orbitParams.phase || 0;
                            
                            // Calcular posici√≥n en √≥rbita el√≠ptica
                            const a = data.orbitParams.semiMajorAxis;
                            const b = data.orbitParams.semiMinorAxis;
                            const e = data.orbitParams.eccentricity || 0;
                            const i = data.orbitParams.inclination || 0;
                            
                            // Ecuaciones param√©tricas de la elipse
                            const theta = time + phase;
                            const x = a * Math.cos(theta);
                            const z = b * Math.sin(theta);
                            const y = Math.sin(theta) * i * 10; // Inclinaci√≥n
                            
                            body.position.set(x, y, z);
                            
                            // Rotaci√≥n realista (tambi√©n reducida)
                            body.children[0].rotation.y += 0.001;
                            body.children[0].rotation.x += 0.00025;
                        }
                    } else if (data.type === 'answer') {
                        // Las respuestas orbitan alrededor de sus preguntas
                        if (data.parentQuestion && data.orbitParams) {
                            const parentBody = celestialBodies[data.parentQuestion];
                            
                            if (parentBody) {
                                const parentPos = parentBody.position.clone();
                                const time = Date.now() * (data.orbitParams.speed * 0.2); // Reducir velocidad al 20%
                                const radius = data.orbitParams.radius || 3;
                                const phase = data.orbitParams.phase || 0;
                                
                                // √ìrbita circular alrededor de la pregunta
                                const x = parentPos.x + radius * Math.cos(time + phase);
                                const y = parentPos.y + radius * Math.sin(time + phase) * 0.5;
                                const z = parentPos.z + radius * Math.sin(time + phase);
                                
                                body.position.set(x, y, z);
                                
                                // Rotaci√≥n m√°s r√°pida para respuestas
                                body.children[0].rotation.y += 0.004;
                            }
                        }
                    }
                    
                    // Aplicar efectos gravitacionales m√°s realistas (Leyes de Kepler)
                    if (['planet', 'moon', 'asteroid', 'question', 'answer'].includes(data.type)) {
                        // Vector desde el cuerpo al centro de masa
                        const bodyPos = body.position.clone();
                        const directionToCM = centerOfMass.clone().sub(bodyPos).normalize();
                        
                        // Distancia al centro de masa
                        const distance = bodyPos.distanceTo(centerOfMass);
                        
                        // Ley de gravitaci√≥n universal de Newton: F = G * (m1 * m2) / r¬≤
                        // Simplificado para visualizaci√≥n
                        const G = 0.0001; // Constante gravitacional ajustada para visualizaci√≥n
                        const centralMass = 100; // Masa del sol central
                        const bodyMass = data.size * data.size; // Masa del cuerpo
                        
                        // Fuerza gravitacional seg√∫n la ley de Newton
                        const gravitationalPull = G * (centralMass * bodyMass) / (distance * distance);
                        
                        // Aplicar atracci√≥n hacia el centro de masa
                        body.position.add(directionToCM.multiplyScalar(gravitationalPull));
                        
                        // Efecto de precesi√≥n orbital (rotaci√≥n gradual del perihelio)
                        if (data.orbitParams) {
                            // Aplicar precesi√≥n al √°ngulo de fase
                            data.orbitParams.phase += 0.00001 * (1 / distance); // Mayor precesi√≥n para √≥rbitas cercanas
                        }
                        
                        // Efecto de inclinaci√≥n orbital variable (nutaci√≥n)
                        if (data.orbitParams && data.orbitParams.inclination) {
                            // Variar ligeramente la inclinaci√≥n con el tiempo
                            const nutationFactor = Math.sin(Date.now() * 0.0001) * 0.01;
                            data.orbitParams.inclination += nutationFactor;
                        }
                    }
                });
            }
            
            controls.update();
            
            // Renderizado con post-procesamiento
            if (composer && bloomComposer) {
                // Renderizar la escena normal
                renderer.render(scene, camera);
                
                // Renderizar con post-procesamiento
                composer.render();
                
                // Renderizar etiquetas despu√©s del post-procesamiento
                labelRenderer.render(scene, camera);
            } else {
                // Fallback a renderizado est√°ndar si no est√° disponible el post-procesamiento
                renderer.render(scene, camera);
                labelRenderer.render(scene, camera);
            }
        }

        function setupPostProcessing() {
            // Configurar EffectComposer principal
            composer = new EffectComposer(renderer);
            
            // A√±adir pase de renderizado b√°sico
            const renderPass = new RenderPass(scene, camera);
            composer.addPass(renderPass);
            
            // A√±adir efecto de bloom para objetos brillantes
            const bloomPass = new UnrealBloomPass(
                new THREE.Vector2(window.innerWidth, window.innerHeight),
                0.8,    // strength
                0.3,    // radius
                0.7     // threshold
            );
            composer.addPass(bloomPass);
            
            // A√±adir SSAO para mejorar la percepci√≥n de profundidad
            const ssaoPass = new SSAOPass(scene, camera, window.innerWidth, window.innerHeight);
            ssaoPass.kernelRadius = 16;
            ssaoPass.minDistance = 0.005;
            ssaoPass.maxDistance = 0.1;
            composer.addPass(ssaoPass);
            
            // Configurar EffectComposer separado para bloom selectivo
            bloomComposer = new EffectComposer(renderer);
            bloomComposer.renderToScreen = false;
            
            const bloomRenderPass = new RenderPass(scene, camera);
            bloomComposer.addPass(bloomRenderPass);
            
            const bloomPassIntense = new UnrealBloomPass(
                new THREE.Vector2(window.innerWidth, window.innerHeight),
                1.5,    // strength
                0.4,    // radius
                0.2     // threshold
            );
            bloomComposer.addPass(bloomPassIntense);
        }

        // Funciones de control
        function resetView() {
            const startPosition = camera.position.clone();
            const startTarget = controls.target.clone();
            const endPosition = new THREE.Vector3(50, 30, 50);
            const endTarget = new THREE.Vector3(0, 0, 0);
            const duration = 1000;
            const startTime = Date.now();
            
            function animateReset() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeProgress = 1 - Math.pow(1 - progress, 3);
                
                camera.position.lerpVectors(startPosition, endPosition, easeProgress);
                controls.target.lerpVectors(startTarget, endTarget, easeProgress);
                controls.update();
                
                if (progress < 1) {
                    requestAnimationFrame(animateReset);
                }
            }
            
            animateReset();
            closeInfoPanel();
        }

        function toggleAnimation() {
            animationEnabled = !animationEnabled;
            document.getElementById('toggle-animation-btn').textContent =
                animationEnabled ? '‚èØÔ∏è Animaci√≥n' : '‚ñ∂Ô∏è Animaci√≥n';
        }

        function toggleLabels() {
            labelsVisible = !labelsVisible;
            
            // Si las etiquetas deben mostrarse pero no existen, crearlas primero
            if (labelsVisible) {
                Object.keys(celestialBodies).forEach(key => {
                    const body = celestialBodies[key];
                    const data = galaxyData[key];
                    
                    // Verificar si ya existe una etiqueta
                    const existingLabel = body.children.find(child => child instanceof CSS2DObject);
                    
                    if (!existingLabel) {
                        // Si no existe etiqueta, crearla
                        createLabel(body, data.title);
                        console.log(`toggleLabels: Creada nueva etiqueta para ${key}`);
                    } else {
                        // Si existe, hacerla visible
                        existingLabel.visible = true;
                        console.log(`toggleLabels: Etiqueta existente hecha visible para ${key}`);
                    }
                });
            } else {
                // Ocultar todas las etiquetas existentes
                Object.keys(celestialBodies).forEach(key => {
                    const body = celestialBodies[key];
                    const label = body.children.find(child => child instanceof CSS2DObject);
                    if (label) {
                        label.visible = false;
                        console.log(`toggleLabels: Etiqueta ocultada para ${key}`);
                    }
                });
            }
            
            document.getElementById('toggle-labels-btn').textContent =
                labelsVisible ? 'üè∑Ô∏è Etiquetas' : 'üìù Etiquetas';
        }

        function showOverview() {
            showInfo('sol-justicia');
            resetView();
        }

        // Inicializar cuando se cargue la p√°gina
        console.log("Configurando evento 'load'");
        window.addEventListener('load', function() {
            console.log("Evento 'load' disparado");
            init();
        });
    </script>
</body>
</html>